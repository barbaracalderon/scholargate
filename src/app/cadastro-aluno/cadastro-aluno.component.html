<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-10 col-lg-8">
      <form [formGroup]="alunoForm" (ngSubmit)="onSubmit()" class="p-4 border rounded bg-light shadow">
        <h1 class="mb-4">Cadastro do Aluno</h1>

        <div class="mb-3">
          <label for="nome" class="form-label">Nome Completo:</label>
          <input id="nome" formControlName="nome" type="text" class="form-control" />
          <div *ngIf="alunoForm.get('nome')?.invalid && alunoForm.get('nome')?.touched" class="text-danger">
            Nome Completo é obrigatório e deve ter entre 8 e 64 caracteres.
          </div>
        </div>

        <div class="mb-3">
          <label for="genero" class="form-label">Gênero:</label>
          <select id="genero" formControlName="genero" class="form-select">
            <option *ngFor="let genero of generos" [value]="genero">{{ genero }}</option>
          </select>
          <div *ngIf="alunoForm.get('genero')?.invalid && alunoForm.get('genero')?.touched" class="text-danger">
            Gênero é obrigatório.
          </div>
        </div>

        <div class="mb-3">
          <label for="dataNascimento" class="form-label">Data de Nascimento:</label>
          <input id="dataNascimento" formControlName="dataNascimento" type="date" class="form-control" />
          <div *ngIf="alunoForm.get('dataNascimento')?.invalid && alunoForm.get('dataNascimento')?.touched" class="text-danger">
            Data de Nascimento é obrigatória e deve ser válida.
          </div>
        </div>

        <div class="mb-3">
          <label for="cpf" class="form-label">CPF:</label>
          <input id="cpf" formControlName="cpf" type="text" class="form-control" />
          <div *ngIf="alunoForm.get('cpf')?.invalid && alunoForm.get('cpf')?.touched" class="text-danger">
            CPF é obrigatório e deve seguir o formato 000.000.000-00.
          </div>
        </div>

        <div class="mb-3">
          <label for="rg" class="form-label">RG:</label>
          <input id="rg" formControlName="rg" type="text" class="form-control" />
          <div *ngIf="alunoForm.get('rg')?.invalid && alunoForm.get('rg')?.touched" class="text-danger">
            RG é obrigatório e deve ter no máximo 20 caracteres.
          </div>
        </div>

        <div class="mb-3">
          <label for="estadoCivil" class="form-label">Estado Civil:</label>
          <select id="estadoCivil" formControlName="estadoCivil" class="form-select">
            <option *ngFor="let estadoCivil of estadosCivis" [value]="estadoCivil">{{ estadoCivil }}</option>
          </select>
          <div *ngIf="alunoForm.get('estadoCivil')?.invalid && alunoForm.get('estadoCivil')?.touched" class="text-danger">
            Estado Civil é obrigatório.
          </div>
        </div>

        <div class="mb-3">
          <label for="telefone" class="form-label">Telefone:</label>
          <input id="telefone" formControlName="telefone" type="text" class="form-control" />
          <div *ngIf="alunoForm.get('telefone')?.invalid && alunoForm.get('telefone')?.touched" class="text-danger">
            Telefone é obrigatório e deve seguir o formato (99) 9 9999-9999.
          </div>
        </div>

        <div class="mb-3">
          <label for="email" class="form-label">E-mail:</label>
          <input id="email" formControlName="email" type="email" class="form-control" />
          <div *ngIf="alunoForm.get('email')?.invalid && alunoForm.get('email')?.touched" class="text-danger">
            E-mail é obrigatório e deve ser válido.
          </div>
        </div>

        <div class="mb-3">
          <label for="senha" class="form-label">Senha:</label>
          <input id="senha" formControlName="senha" type="password" class="form-control" />
          <div *ngIf="alunoForm.get('senha')?.invalid && alunoForm.get('senha')?.touched" class="text-danger">
            Senha é obrigatória e deve ter no mínimo 8 caracteres.
          </div>
        </div>

        <div class="mb-3">
          <label for="naturalidade" class="form-label">Naturalidade:</label>
          <input id="naturalidade" formControlName="naturalidade" type="text" class="form-control" />
          <div *ngIf="alunoForm.get('naturalidade')?.invalid && alunoForm.get('naturalidade')?.touched" class="text-danger">
            Naturalidade é obrigatória e deve ter entre 8 e 64 caracteres.
          </div>
        </div>

        <div class="mb-3">
          <label for="enderecoCep" class="form-label">CEP:</label>
          <input id="enderecoCep" formControlName="enderecoCep" type="text" class="form-control" (blur)="buscarEndereco()" />
          <div *ngIf="alunoForm.get('enderecoCep')?.invalid && alunoForm.get('enderecoCep')?.touched" class="text-danger">
            CEP é obrigatório e deve seguir o formato 00000-000.
          </div>
        </div>

        <div class="mb-3">
          <label for="cidade" class="form-label">Cidade:</label>
          <input id="cidade" formControlName="cidade" type="text" class="form-control" readonly />
        </div>

        <div class="mb-3">
          <label for="estado" class="form-label">Estado:</label>
          <input id="estado" formControlName="estado" type="text" class="form-control" readonly />
        </div>

        <div class="mb-3">
          <label for="logradouro" class="form-label">Logradouro:</label>
          <input id="logradouro" formControlName="logradouro" type="text" class="form-control" />
        </div>

        <div class="mb-3">
          <label for="numero" class="form-label">Número:</label>
          <input id="numero" formControlName="numero" type="text" class="form-control" />
        </div>

        <div class="mb-3">
          <label for="complemento" class="form-label">Complemento:</label>
          <input id="complemento" formControlName="complemento" type="text" class="form-control" />
        </div>

        <div class="mb-3">
          <label for="bairro" class="form-label">Bairro:</label>
          <input id="bairro" formControlName="bairro" type="text" class="form-control" />
        </div>

        <div class="mb-3">
          <label for="pontoReferencia" class="form-label">Ponto de Referência:</label>
          <input id="pontoReferencia" formControlName="pontoReferencia" type="text" class="form-control" />
        </div>

        <div class="mb-3">
          <div class="form-group">
            <label for="turmas">Turmas:</label>
            <select id="turmas" formControlName="turmas" multiple class="form-select">
              <option *ngFor="let turma of turmas" [value]="turma">{{ turma }}</option>
            </select>
          </div>
          
          <div *ngIf="alunoForm.get('turmas')?.invalid && alunoForm.get('turmas')?.touched" class="text-danger">
            Turmas são obrigatórias.
          </div>
        </div>

        <div class="d-flex justify-content-end">
          <button type="submit" class="btn btn-primary me-2" [disabled]="!alunoForm.valid">Salvar</button>
          <button type="button" class="btn btn-secondary me-2" (click)="onEdit()">Editar</button>
          <button type="button" class="btn btn-danger" (click)="onDelete()">Deletar</button>
          <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
</div>
